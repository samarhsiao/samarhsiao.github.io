{"ast":null,"code":"var _jsxFileName = \"/Users/smr/Desktop/my-first-project/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport './styles/App.css';\nimport logo from './img/taipei-city-logo.png';\nimport BarChart from './component/BarChart';\nimport { API_HOST } from './config';\nimport axios from 'axios';\nimport Spinner from './component/Spinner';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [districtOpt, setDistrictOpt] = useState([{}]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [dataSet, setdataSet] = useState({\n    labels: [\"共同生活戶\", \"單獨生活戶\"],\n    datasets: [{\n      label: '女性',\n      data: [0, 0],\n      backgroundColor: \"#DF7B7B\"\n    }, {\n      label: '男性',\n      data: [0, 0],\n      backgroundColor: \"#478CD1\"\n    }]\n  });\n  useEffect(() => {\n    (async () => {\n      let rawdata = await axios.get(`${API_HOST}`); //  console.log(rawdata.data)\n\n      const tpeDistData = rawdata.data;\n      let r = tpeDistData.filter(v => {\n        return v.site_id.slice(0, 3) === \"臺北市\";\n      }); // console.log(r)\n\n      let set = new Set();\n      const result = r.filter(v => {\n        return !set.has(v.site_id) ? set.add(v.site_id) : false;\n      });\n      setDistrictOpt(result);\n    })();\n\n    setTimeout(() => {\n      setIsLoading(false);\n    }, 8000);\n  }, []);\n\n  const loadDistrictData = async e => {\n    const dist = document.getElementById('tpedist');\n\n    if (dist.value === e.target.value) {\n      let rawData = await axios.get(`${API_HOST}`);\n      const allTpeDistData = rawData.data;\n      const j = allTpeDistData.filter(v => {\n        return v.site_id === e.target.value;\n      });\n      let fosum = 0;\n      let mosum = 0;\n      let fssum = 0;\n      let mssum = 0;\n\n      for (let i of j) {\n        fosum += i.household_ordinary_f - 0;\n        mosum += i.household_ordinary_m - 0;\n        fssum += i.household_single_f - 0;\n        mssum += i.household_single_m - 0;\n      }\n\n      setdataSet({\n        labels: [\"共同生活戶\", \"單獨生活戶\"],\n        datasets: [{\n          label: '女性',\n          data: [fosum, fssum],\n          backgroundColor: \"#DF7B7B\"\n        }, {\n          label: '男性',\n          data: [mosum, mssum],\n          backgroundColor: \"#478CD1\"\n        }]\n      });\n    }\n  };\n\n  const setDataBack = () => {\n    setdataSet({\n      labels: [\"共同生活戶\", \"單獨生活戶\"],\n      datasets: [{\n        label: '女性',\n        data: [0, 0],\n        backgroundColor: \"#DF7B7B\"\n      }, {\n        label: '男性',\n        data: [0, 0],\n        backgroundColor: \"#478CD1\"\n      }]\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tpgov_logo mb-3 mt-4 mx-auto\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: logo,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 4\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"title mb-5\",\n        children: \"108\\u5E74\\u53F0\\u5317\\u5E02\\u5404\\u5340\\u6236\\u6578\\u8CC7\\u6599\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: isLoading ? 'mySpinner d-flex' : 'mySpinner d-none',\n        children: [/*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 70\n        }, this), \"\\u8CC7\\u6599\\u8F09\\u5165\\u4E2D\\uFF0C\\u8ACB\\u7A0D\\u5019\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 2\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: isLoading ? 'd-flex align-center justify-content-evenly mb-3 opacity0' : 'd-flex align-center mb-3 opacity1',\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"district\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 2\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"test\",\n          children: \"\\u884C\\u653F\\u5340\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 5\n        }, this), \"&bn\", /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"\",\n            id: \"tpedist\",\n            onChange: e => {\n              loadDistrictData(e);\n            },\n            onClick: () => {\n              setDataBack();\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"\\u8ACB\\u9078\\u64C7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 9\n            }, this), districtOpt.length !== 0 ? districtOpt.map((district, key) => {\n              return /*#__PURE__*/_jsxDEV(\"option\", {\n                children: district.site_id\n              }, key, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 12\n              }, this);\n            }) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(BarChart, {\n          dataSet: dataSet\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 4\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 2\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(App, \"D5uNUljlFpbBZkEf6sRw0gfv7Ic=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/smr/Desktop/my-first-project/src/App.js"],"names":["React","useEffect","useState","logo","BarChart","API_HOST","axios","Spinner","App","districtOpt","setDistrictOpt","isLoading","setIsLoading","dataSet","setdataSet","labels","datasets","label","data","backgroundColor","rawdata","get","tpeDistData","r","filter","v","site_id","slice","set","Set","result","has","add","setTimeout","loadDistrictData","e","dist","document","getElementById","value","target","rawData","allTpeDistData","j","fosum","mosum","fssum","mssum","i","household_ordinary_f","household_ordinary_m","household_single_f","household_single_m","setDataBack","length","map","district","key"],"mappings":"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","sourcesContent":["import React, {\n  useEffect,useState\n \n} from 'react'\nimport './styles/App.css';\nimport logo from './img/taipei-city-logo.png'\nimport BarChart from './component/BarChart'\nimport {\n  API_HOST\n} from './config'\nimport axios from 'axios'\nimport Spinner from './component/Spinner'\nfunction App() {\n  const [districtOpt, setDistrictOpt] = useState([{}]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [dataSet, setdataSet] = useState({\n    labels: [\"共同生活戶\", \"單獨生活戶\"],\n    datasets: [{\n        label: '女性',\n        data: [0,0],\n        backgroundColor: \"#DF7B7B\",\n      },\n      {\n        label: '男性',\n        data: [0, 0],\n        backgroundColor: \"#478CD1\",\n      },\n    ],\n  });\n  useEffect(()=>{\n   (async () => {\n     let rawdata = await axios.get(`${API_HOST}`)\n    //  console.log(rawdata.data)\n    const tpeDistData = rawdata.data\n     let r = tpeDistData.filter((v) => {\n       return v.site_id.slice(0, 3) === \"臺北市\";\n    })\n    // console.log(r)\n    let set = new Set();\n    const result = r.filter(v => {\n      return !set.has(v.site_id) ? set.add(v.site_id) : false\n    })\n    setDistrictOpt(result)\n    \n     })()\n     setTimeout(() => {\n       setIsLoading(false)\n     }, 8000)\n  },[])\n  \n\n const loadDistrictData=async(e)=>{\n const dist = document.getElementById('tpedist');\n if(dist.value === e.target.value){\n        let rawData = await axios.get(`${API_HOST}`)\n        const allTpeDistData = rawData.data\n        const j = allTpeDistData.filter((v) => {\n        return v.site_id === e.target.value;\n        })\n        let fosum=0;\n        let mosum=0;\n        let fssum=0;\n        let mssum=0;\n\n        for (let i of j) {    \n          fosum += (i.household_ordinary_f - 0);\n          mosum += (i.household_ordinary_m - 0);\n          fssum += (i.household_single_f - 0);\n          mssum += (i.household_single_m - 0);\n        }     \n       \nsetdataSet({\n  labels: [\"共同生活戶\", \"單獨生活戶\"],\n  datasets: [{\n      label: '女性',\n      data: [fosum, fssum],\n      backgroundColor: \"#DF7B7B\",\n    },\n    {\n      label: '男性',\n      data: [mosum, mssum],\n      backgroundColor: \"#478CD1\",\n    },\n  ],\n})\n       \n }\n  \n }\n const setDataBack = ()=>{\n   setdataSet({\n     labels: [\"共同生活戶\", \"單獨生活戶\"],\n     datasets: [{\n         label: '女性',\n         data: [0, 0],\n         backgroundColor: \"#DF7B7B\",\n       },\n       {\n         label: '男性',\n         data: [0, 0],\n         backgroundColor: \"#478CD1\",\n       },\n     ],\n   })\n\n }\n\nreturn (\n    <>\n\n      <div className=\"container\">\n      \n   <div className=\"tpgov_logo mb-3 mt-4 mx-auto\">\n   <img src={logo} alt=\"\"></img>\n  </div> \n  <p className=\"title mb-5\">108年台北市各區戶數資料</p>\n  \n <div className={isLoading? 'mySpinner d-flex' : 'mySpinner d-none'}><Spinner />資料載入中，請稍候</div>\n  <div className={\n    isLoading ? 'd-flex align-center justify-content-evenly mb-3 opacity0' : 'd-flex align-center mb-3 opacity1'\n  }\n  >\n <div className=\"district\"></div>\n    <p className=\"test\">\n      行政區\n    </p>\n    &bn \n    <div>\n      <select name = \"\"\n      id = \"tpedist\"\n      onChange = {\n        (e)=>{loadDistrictData(e)\n       }\n      }\n      onClick={()=>{setDataBack()}}>\n        <option>請選擇</option>\n   {  \n   districtOpt.length !== 0 ? (districtOpt.map((district,key)=>{\n       return(\n           <option key={key}>{district.site_id}</option>\n       )\n     })):(<></>)    \n   }\n      </select>\n    </div>\n  </div>\n <div className=\"row\">\n   <BarChart\n     dataSet = {\n       dataSet\n     }\n   />\n </div>\n</div>\n    </>\n  );\n\n  }\nexport default App\n"]},"metadata":{},"sourceType":"module"}