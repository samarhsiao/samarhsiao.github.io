{"version":3,"sources":["img/taipei-city-logo.png","component/BarChart.js","config/index.js","component/Spinner.js","App.js","index.js"],"names":["ChartJS","register","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","options","responsive","animation","duration","easing","BarChart","props","dataSet","className","data","API_HOST","Spinner","App","useState","districtOpt","setDistrictOpt","isLoading","setIsLoading","labels","datasets","label","backgroundColor","setDataSet","useEffect","a","axios","get","rawdata","tpeDistData","r","filter","v","site_id","slice","set","Set","result","has","add","setTimeout","loadDistrictData","e","dist","document","getElementById","fosum","mosum","fssum","mssum","value","target","rawData","allTpeDistData","j","i","household_ordinary_f","household_ordinary_m","household_single_f","household_single_m","src","logo","alt","name","id","onChange","onClick","length","map","district","key","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.ef0eb045.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/taipei-city-logo.bae7fc0e.png\";","import React from 'react'\n\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend,\n} from 'chart.js';\nimport { Bar } from 'react-chartjs-2';\n\n\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  BarElement,\n  Title,\n  Tooltip,\n  Legend\n);\n\nexport const options = {\n  responsive: true,\n  options: {\n    animation: {\n      duration: 1000,\n      easing: 'easeOutQuart'\n    }\n  }\n  \n};\nfunction BarChart(props) {\n const {dataSet} = props;\n  return (\n    <>\n        <Bar className=\"mb-4\"\n        options = {\n          options\n        }\n        data = {\n         dataSet          \n        }\n        />\n    </>\n  )\n}\n\nexport default BarChart\n","export const debug = true\nexport const devUrl = 'http://localhost:3000'\nexport const API_HOST = 'http://localhost:3002'","import React from 'react'\nimport '../styles/App.css'\nfunction Spinner() {\n  return (\n    <>\n     <div className=\"mySpinner loadingio-spinner-disk-0fvlyqfh80kj\"><div className=\"ldio-j9cfy7v3t3e\"><div><div></div><div></div></div></div></div>\n    </>\n  )\n}\n\nexport default Spinner\n","import React, {\n  useEffect,useState\n \n} from 'react'\nimport './styles/App.css';\nimport logo from './img/taipei-city-logo.png'\nimport BarChart from './component/BarChart'\nimport {\n  API_HOST\n} from './config'\nimport axios from 'axios'\nimport Spinner from './component/Spinner'\nfunction App() {\n  const [districtOpt, setDistrictOpt] = useState([{}]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [dataSet, setDataSet] = useState({\n    labels: [\"共同生活戶\", \"單獨生活戶\"],\n    datasets: [{\n        label: '女性',\n        data: [0,0],\n        backgroundColor: \"#DF7B7B\",\n      },\n      {\n        label: '男性',\n        data: [0, 0],\n        backgroundColor: \"#478CD1\",\n      },\n    ],\n  });\n  useEffect(()=>{\n   (async () => {\n     let rawdata = await axios.get(`${API_HOST}`)\n    //  console.log(rawdata.data)\n    const tpeDistData = rawdata.data\n     let r = tpeDistData.filter((v) => {\n       return v.site_id.slice(0, 3) === \"臺北市\";\n    })\n    // console.log(r)\n    let set = new Set();\n    const result = r.filter(v => {\n      return !set.has(v.site_id) ? set.add(v.site_id) : false\n    })\n    setDistrictOpt(result)\n    \n     })()\n     setTimeout(() => {\n       setIsLoading(false)\n     }, 8000)\n  },[])\n  \n\n const loadDistrictData=async(e)=>{\n const dist = document.getElementById('tpedist');\n let fosum = 0;\n let mosum = 0;\n let fssum = 0;\n let mssum = 0;\n if(dist.value === e.target.value){\n        let rawData = await axios.get(`${API_HOST}`)\n        const allTpeDistData = rawData.data\n        const j = allTpeDistData.filter((v) => {\n        return v.site_id === e.target.value;\n        })\n      \n        for (let i of j) {    \n          fosum += (i.household_ordinary_f - 0);\n          mosum += (i.household_ordinary_m - 0);\n          fssum += (i.household_single_f - 0);\n          mssum += (i.household_single_m - 0);\n        }            \n }\n setDataSet({\n   labels: [\"共同生活戶\", \"單獨生活戶\"],\n   datasets: [{\n       label: '女性',\n       data: [fosum, fssum],\n       backgroundColor: \"#DF7B7B\",\n     },\n     {\n       label: '男性',\n       data: [mosum, mssum],\n       backgroundColor: \"#478CD1\",\n     },\n   ],\n })\n  \n }\n \n const setDataBack = ()=>{\n   setDataSet({\n     labels: [\"共同生活戶\", \"單獨生活戶\"],\n     datasets: [{\n         label: '女性',\n         data: [0, 0],\n         backgroundColor: \"#DF7B7B\",\n       },\n       {\n         label: '男性',\n         data: [0, 0],\n         backgroundColor: \"#478CD1\",\n       },\n     ],\n   })\n\n }\n\nreturn (\n    <>\n\n      <div className=\"container\">\n      \n   <div className=\"tpgov_logo mb-3 mt-4 mx-auto\">\n   <img src={logo} alt=\"\"></img>\n  </div> \n  <p className=\"title mb-5\">108年台北市各區戶數資料</p>\n  \n <div className={isLoading? 'mySpinner d-flex' : 'mySpinner d-none'}><Spinner />資料載入中，請稍候</div>\n  <div className={\n    isLoading ? 'd-flex align-center justify-content-evenly mb-3 opacity0' : 'd-flex align-center mb-3 opacity1'\n  }\n  >\n <div className=\"district\"></div>\n    <p className=\"test\">\n      行政區\n    </p>\n     <div className=\"space\"></div>\n    <div>\n      <select name = \"\"\n      id = \"tpedist\"\n      onChange = {\n        (e)=>{loadDistrictData(e)\n       }\n      }\n      onClick={()=>{setDataBack()}}>\n        <option>請選擇</option>\n   {  \n   districtOpt.length !== 0 ? (districtOpt.map((district,key)=>{\n       return(\n           <option key={key}>{district.site_id}</option>\n       )\n     })):(<></>)    \n   }\n      </select>\n    </div>\n  </div>\n <div className=\"row\">\n   <BarChart\n     dataSet = {\n       dataSet\n     }\n   />\n </div>\n</div>\n    </>\n  );\n\n  }\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'bootstrap/scss/bootstrap.scss'\nimport './styles/global.scss'\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}